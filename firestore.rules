rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // PERMISSIONS POUR LE DÉVELOPPEMENT - À MODIFIER POUR LA PRODUCTION
    
    // Collection "users" - accessible pour la création initiale d'admin
    match /users/{userId} {
      // Permettre la création d'utilisateur SANS authentification
      allow create: if true;
      
      // Permettre la lecture et écriture pour tous pendant le développement
      allow read, update, delete: if true;
    }
    
    // Collection "admins" - accessible pour la création initiale d'admin
    match /admins/{adminId} {
      // Permettre la création d'admin SANS authentification
      allow create: if true;
      
      // Permettre tout pendant le développement
      allow read, update, delete: if true;
      
      // Sous-collections de l'admin
      match /{document=**} {
        allow read, write: if true;
      }
    }
    
    // Permettre tout le reste pendant le développement
    match /{document=**} {
      allow read, write: if true;
    }
  }
}